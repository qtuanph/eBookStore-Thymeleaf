<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Qu·∫£n l√Ω s√°ch</title>
    <style>
     table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        padding: 12px;
        border: 1px solid #ccc;
        text-align: center;
        vertical-align: middle;
    }

    img.cover-image {
        width: 60px;
        height: 90px;
        object-fit: contain;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: #f9f9f9;
        box-shadow: 0 0 4px rgba(0,0,0,0.05);
    }
</style>
</head>
<body>
<h1>Danh s√°ch s√°ch</h1>
<a th:href="@{/admin/books/add}">‚ûï Th√™m s√°ch m·ªõi</a>
<a th:href="@{/admin/dashboard}">üîô Quay l·∫°i</a>
<table>
    <tr>
        <th>ID</th>
        <th>Ti√™u ƒë·ªÅ</th>
        <th>T√°c gi·∫£</th>
        <th>Gi√°</th>
        <th>·∫¢nh b√¨a</th>
        <th>M√¥ t·∫£</th>
        <th>T√≥m t·∫Øt</th>
        <th>ISBN</th>
        <th>Nh√† xu·∫•t b·∫£n</th>
        <th>Ng√†y xu·∫•t b·∫£n</th>
        <th>S·ªë trang</th>
        <th>File PDF</th>
        <th>M√£ danh m·ª•c</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    <tr th:each="book : ${books}">
        <td th:text="${book.id}">1</td>
        <td th:text="${book.title}">T·ª±a s√°ch</td>
        <td th:text="${book.author}">T√°c gi·∫£</td>
        <td th:text="${book.price}">99.000</td>
        <td>
            <img class="cover-image"
            th:src="@{/image/book/{img}(img=${book.cover != null ? book.cover : 'default-book.jpg'})}"
            alt="·∫¢nh b√¨a" />
        </td>
        <td th:text="${book.bookDetail != null ? book.bookDetail.description : ''}">M√¥ t·∫£</td>
        <td th:text="${book.bookDetail != null ? book.bookDetail.summary : ''}">T√≥m t·∫Øt</td>
        <td th:text="${book.bookDetail != null ? book.bookDetail.isbn : ''}">ISBN</td>
        <td th:text="${book.bookDetail != null ? book.bookDetail.publisher : ''}">Nh√† xu·∫•t b·∫£n</td>
        <td th:text="${book.bookDetail != null && book.bookDetail.publicationDate != null ? #temporals.format(book.bookDetail.publicationDate, 'dd/MM/yyyy') : ''}">Ng√†y xu·∫•t b·∫£n</td>
        <td th:text="${book.bookDetail != null ? book.bookDetail.pages : ''}">S·ªë trang</td>
        <td>
             <a th:if="${book.bookDetail != null && book.bookDetail.fileUrl != null}" 
                th:href="@{/file/book/{file}(file=${book.bookDetail.fileUrl})}" 
                target="_blank" class="file-link">
                üìÑ T·∫£i PDF
            </a>
            <span th:if="${book.bookDetail == null || book.bookDetail.fileUrl == null}">Kh√¥ng c√≥</span>
        </td>
        <td th:text="${book.subCategory != null ? book.subCategory.id : 'Ch∆∞a c√≥'}"></td>
         <td>
            <a th:href="@{'/admin/books/edit/' + ${book.id}}">‚úèÔ∏è S·ª≠a</a> |
            <a th:href="@{'/admin/books/delete/' + ${book.id}}"
               onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a?')">‚ùå X√≥a</a>
        </td>
    </tr>
</table>
</body>
</html>
